function setCheckedStar(e){for(var t=document.getElementsByClassName("rating-star"),n=0;n<5;n++)t[n].children[0].className="star-img",t[n].children[1].className="star-img d-none";for(n=0;n<e;n++)t[n].children[0].className="star-img d-none",t[n].children[1].className="star-img"}function setUnCheckedStar(e){for(var t=document.getElementsByClassName("rating-star"),n=document.getElementById("rating").value;n<e;n++)t[n].children[0].className="star-img",t[n].children[1].className="star-img d-none"}function starOn(e){for(var t=document.getElementsByClassName("rating-star"),n=0;n<e;n++)t[n].children[0].className="star-img d-none",t[n].children[1].className="star-img"}function setRating(e){setCheckedStar(document.getElementById("rating").value=e)}function loadRatings(){var e=document.getElementById("offset_ratings").value,t=document.getElementById("course_ratings").value,n=new XMLHttpRequest;n.onload=function(){var e;(0==this.responseText.length||(e=JSON.parse(this.responseText),document.getElementById("container_ratings").innerHTML+=e.content,document.getElementById("btn_load_ratings").innerHTML=e.button_show_more,e.ratings_remaining<=0))&&(document.getElementById("btn_load_ratings").style.display="none")},n.open("GET","../blocks/course_rating/endpoint.php?section=COMMENTS&course="+t+"&offset="+e),n.send(),document.getElementById("offset_ratings").value=parseInt(e)+5}function loadRatingBars(){var e=document.getElementById("course_ratings").value,t=new XMLHttpRequest;t.onload=function(){document.getElementById("container_ratings_bars").innerHTML=this.responseText},t.open("GET","../blocks/course_rating/endpoint.php?section=RATINGS&course="+e),t.send()}var stars=document.getElementsByClassName("rating-star");stars.forEach(t=>{t.addEventListener("mouseover",e=>{starOn(t.dataset.block_rating)}),t.addEventListener("mouseout",e=>{setUnCheckedStar(t.dataset.block_rating)}),t.addEventListener("click",e=>{setRating(t.dataset.block_rating)})}),document.getElementById("edit_rating_button")&&(document.getElementById("edit_rating_button").addEventListener("click",e=>{document.getElementById("rating_message").style.display="none",document.getElementById("rating_form").style.display="block"}),document.getElementById("cancel_rating_button").addEventListener("click",e=>{document.getElementById("rating_message").style.display="flex",document.getElementById("rating_form").style.display="none"})),document.getElementById("rating")&&setCheckedStar(document.getElementById("rating").value),document.getElementById("offset_ratings")&&document.getElementById("course_ratings")&&loadRatings(),document.getElementById("container_ratings_bars")&&loadRatingBars();